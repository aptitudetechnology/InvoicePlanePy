<form method="post">
  <input type="hidden" name="_token" value="{{ csrf_token }}">

  <!-- Basic Quote Fields -->
  <div class="mb-3">
    <label for="quote_number" class="form-label">Quote Number</label>
    <input type="text" class="form-control" id="quote_number" name="quote_number" value="{{ quote.quote_number }}">
  </div>

  <div class="mb-3">
    <label for="client_id" class="form-label">Client ID</label>
    <input type="text" class="form-control" id="client_id" name="client_id" value="{{ quote.client_id }}">
  </div>

  <div class="mb-3">
    <label for="user_id" class="form-label">User ID</label>
    <input type="text" class="form-control" id="user_id" name="user_id" value="{{ quote.user_id }}">
  </div>

  <div class="mb-3">
    <label for="issue_date" class="form-label">Issue Date</label>
    <input type="date" class="form-control" id="issue_date" name="issue_date" value="{{ quote.issue_date }}">
  </div>

  <div class="mb-3">
    <label for="status" class="form-label">Status</label>
    <input type="text" class="form-control" id="status" name="status" value="{{ quote.status }}">
  </div>

  <div class="mb-3">
    <label for="currency_code" class="form-label">Currency</label>
    <input type="text" class="form-control" id="currency_code" name="currency_code" value="{{ quote.currency_code }}">
  </div>

  <div class="mb-3">
    <label for="exchange_rate" class="form-label">Exchange Rate</label>
    <input type="text" class="form-control" id="exchange_rate" name="exchange_rate" value="{{ quote.exchange_rate }}">
  </div>

  <div class="mb-3">
    <label for="discount_percentage" class="form-label">Discount (%)</label>
    <input type="text" class="form-control" id="discount_percentage" name="discount_percentage" value="{{ quote.discount_percentage }}">
  </div>

  <div class="mb-3">
    <label for="quote_pdf_password" class="form-label">PDF Password</label>
    <input type="text" class="form-control" id="quote_pdf_password" name="quote_pdf_password" value="{{ quote.quote_pdf_password }}">
  </div>

  <div class="mb-3">
    <label for="notes" class="form-label">Notes</label>
    <textarea class="form-control" id="notes" name="notes" rows="4">{{ quote.notes }}</textarea>
  </div>

  <!-- Quote Items -->
  <h5 class="mt-4">Quote Items</h5>
  <div id="items-container">
    {% for item in quote.items %}
      <div class="card mb-3 p-3">
        <input type="hidden" name="items[{{ loop.index0 }}][id]" value="{{ item.id }}">

        <div class="mb-2">
          <label class="form-label">Item Name</label>
          <input class="form-control" name="items[{{ loop.index0 }}][name]" value="{{ item.name }}">
        </div>

        <div class="mb-2">
          <label class="form-label">Description</label>
          <textarea class="form-control" name="items[{{ loop.index0 }}][description]" rows="2">{{ item.description }}</textarea>
        </div>

        <div class="row">
          <div class="col-md-4 mb-2">
            <label class="form-label">Quantity</label>
            <input class="form-control" name="items[{{ loop.index0 }}][quantity]" value="{{ item.quantity }}">
          </div>

          <div class="col-md-4 mb-2">
            <label class="form-label">Price</label>
            <input class="form-control" name="items[{{ loop.index0 }}][price]" value="{{ item.price }}">
          </div>

          <div class="col-md-4 mb-2">
            <label class="form-label">Tax Rate</label>
            <select name="items[{{ loop.index0 }}][tax_rate]" class="form-select">
              <option value="0">None</option>
              {% for rate in tax_rates %}
                <option value="{{ rate.id }}" {% if rate.id == item.tax_rate_id %}selected{% endif %}>
                  {{ rate.name }} ({{ rate.percent }}%)
                </option>
              {% endfor %}
            </select>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Submit Button -->
  <button type="submit" class="btn btn-primary">Save Quote</button>
</form>
